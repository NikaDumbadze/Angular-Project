<!-- component -->
<div class="bg-grey-lighter min-h-screen flex flex-col">
    <div class="container max-w-sm mx-auto flex-1 flex flex-col items-center justify-center px-2">
        <div class="bg-slate-300 px-6 py-8 rounded shadow-md text-black w-full">
            <form [formGroup]="signupForm" (submit)="signUp()">
                <h1 class="mb-8 text-3xl text-center text-indigo-600"><strong>Sign up</strong></h1>

                <!-- first name -->
                <div>
                    <input type="text" class="form-control rounded-2xl p-2.5" id="firstNameId" type="text" placeholder="First Name"
                        name="fname" formControlName="firstName"
                        [ngClass]="{'is-invalid': (signupForm.get('firstName')?.touched || signupForm.get('firstName')?.dirty) && !signupForm.get('firstName')?.valid }" />
                    <span class="invalid-feedback">
                        <span *ngIf="signupForm.get('firstName')?.errors?.['required']">
                            Please enter your first name.
                        </span>
                        <span *ngIf="signupForm.get('firstName')?.errors?.['minlength']">
                            The first name must be longer than 3 characters.
                        </span>
                    </span>
                </div><br>


                <!-- last name -->
                <div>
                    <input class="form-control rounded-2xl p-2.5" id="lastNameId" type="text" placeholder="Last Name"
                        formControlName="lastName"
                        [ngClass]="{'is-invalid': (signupForm.get('lastName')?.touched || signupForm.get('lastName')?.dirty) && !signupForm.get('lastName')?.valid }">
                    <span class="invalid-feedback">
                        <span *ngIf="signupForm.get('lastName')?.errors?.['required']">
                            Please enter your last name.
                        </span>
                        <span *ngIf="signupForm.get('lastName')?.errors?.['maxlength']">
                            The last name must be less than 50 characters.
                        </span>
                    </span>
                </div><br>


                <!-- email -->
                <div>
                    <input class="form-control rounded-2xl p-2.5" id="emailId" type="email" placeholder="Email address"
                        formControlName="email" [ngClass]="{'is-invalid': (signupForm.get('email')?.touched
                                        || signupForm.get('email')?.dirty)
                                        && !signupForm.get('email')?.valid }" />
                    <span class="invalid-feedback">
                        <span *ngIf="signupForm.get('email')?.errors?.['required']">
                            Please enter your email address.
                        </span>
                        <span *ngIf="signupForm.get('email')?.errors?.['email']">
                            Please enter a valid email address.
                        </span>
                    </span>
                </div><br>
               


                 <!-- for cross-field validation password && Confirm password -->
                <div formGroupName="passwordGroup">

                    <!-- password -->
                    <div>
                        <input class="form-control rounded-2xl p-2.5" id="emailId" type="password" placeholder="Password"
                            formControlName="password" [ngClass]="{'is-invalid': passwordMessage }" />
                        <span class="invalid-feedback">
                            {{passwordMessage}}
                        </span>
                    </div><br>

                    <!-- confirm password -->
                    <div>
                        <input class="form-control rounded-2xl p-2.5" type="password" placeholder="Confirm password"
                            formControlName="confirmPassword" [ngClass]="{'is-invalid':  signupForm.get('passwordGroup')?.errors ||
                                               ((signupForm.get('passwordGroup.confirmPassword')?.touched || 
                                               signupForm.get('passwordGroup.confirmPassword')?.dirty) && 
                                               !signupForm.get('passwordGroup.confirmPassword')?.valid) }" />
                        <span class="invalid-feedback">
                            <span *ngIf="signupForm.get('passwordGroup.confirmPassword')?.errors?.['required']">
                                Please confirm your email address
                            </span>
                            <span
                                *ngIf="signupForm.get('passwordGroup')?.errors?.['match'] && signupForm.get('passwordGroup.confirmPassword')?.value">
                                The confirmation does not match the email address
                            </span>
                        </span>
                    </div>
                </div><br>

                <button type="submit"
                    class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-3xl text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    Create Account
                </button>
            </form>

            <div class="text-grey-dark mt-6">
                Already have an account?
                <a routerLink="/login" class="no-underline border-b border-blue text-blue"
                    class="text-indigo-600 font-semibold ml-3">
                    Log in
                </a>
            </div>

        </div>
    </div>
</div>